<Page x:Class="NetStream.EpisodesPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:local="clr-namespace:NetStream"
      mc:Ignorable="d" 
      Width="Auto" Height="Auto"
      Title="EpisodesPage" Loaded="EpisodesPage_OnLoaded" KeepAlive="False">

    <Grid>
       
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="0.03*"></RowDefinition>
                    <RowDefinition Height="*"></RowDefinition>
                    <RowDefinition Height="0.1*"></RowDefinition>
                    <RowDefinition Height="0.01*"></RowDefinition>
                    <RowDefinition Height="0.01*"></RowDefinition>
                    <RowDefinition Height="*"></RowDefinition>
                    <RowDefinition Height="*"></RowDefinition>
                </Grid.RowDefinitions>
                <TextBlock HorizontalAlignment="Center" Margin="0 20 0 20" FontSize="28" Style="{StaticResource Gotham}"  Text="{DynamicResource SeasonsString}" Foreground="White" ></TextBlock>
            
                <Grid Grid.Row="2" >
                    <ListBox   ScrollViewer.CanContentScroll="True" 
VirtualizingPanel.IsVirtualizing="true" 
VirtualizingPanel.VirtualizationMode="Recycling"   SelectionChanged="SeasonsDisplay_OnSelectionChanged"  ScrollViewer.ScrollChanged="SeasonsDisplay_OnScrollChanged"  ScrollViewer.HorizontalScrollBarVisibility="Disabled" ScrollViewer.VerticalScrollBarVisibility="Disabled" Background="Transparent" x:Name="SeasonsDisplay">

                       
                        <ListBox.ItemContainerStyle>
                            <Style TargetType="ListBoxItem">
                                <Setter Property="IsSelected" Value="{Binding Content.IsSelected, Mode=TwoWay, RelativeSource={RelativeSource Self}}"/>
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="ListBoxItem">
                                            <ContentPresenter/>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </ListBox.ItemContainerStyle>
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal" Cursor="Hand"  Margin="0 20 20 20" >

                                <Border BorderBrush="#1F2021" VerticalAlignment="Top" Height="275" Width="190" HorizontalAlignment="Left" RenderTransformOrigin="0.5,0.5" BorderThickness="5">
                                    <Image   Source="{Binding Poster}"></Image>
                                    <Border.RenderTransform>
                                        <ScaleTransform x:Name="ImageScale" ScaleX="1" ScaleY="1" ></ScaleTransform>
                                    </Border.RenderTransform>
                                    <Border.Triggers>
                                        <EventTrigger RoutedEvent="Image.MouseEnter">
                                            <BeginStoryboard>
                                                <Storyboard>
                                                    <DoubleAnimation Storyboard.TargetName="ImageScale" Storyboard.TargetProperty="(ScaleTransform.ScaleX)" To="1.05" Duration="0:0:0.20" />
                                                    <DoubleAnimation Storyboard.TargetName="ImageScale" Storyboard.TargetProperty="(ScaleTransform.ScaleY)" To="1.05" Duration="0:0:0.20" />
                                                </Storyboard>
                                            </BeginStoryboard>
                                        </EventTrigger>
                                        <EventTrigger RoutedEvent="MouseLeave">
                                            <BeginStoryboard>
                                                <Storyboard>
                                                    <DoubleAnimation Storyboard.TargetName="ImageScale" Storyboard.TargetProperty="(ScaleTransform.ScaleX)" To="1" Duration="0:0:0.20" />
                                                    <DoubleAnimation Storyboard.TargetName="ImageScale" Storyboard.TargetProperty="(ScaleTransform.ScaleY)" To="1" Duration="0:0:0.20" />
                                                </Storyboard>
                                            </BeginStoryboard>
                                        </EventTrigger>
                                    </Border.Triggers>
                                </Border>

                                <StackPanel Margin="20 15 0 0" Orientation="Vertical">
                                        <TextBlock FontSize="20" FontWeight="Medium" Style="{StaticResource Gotham}" Text="{Binding SeasonNumberText}" Foreground="White"></TextBlock>
                                        <StackPanel Margin="0 5 0 0" Orientation="Horizontal">
                                            <TextBlock FontSize="15" Style="{StaticResource Gotham}" Text="{Binding Year}" Foreground="White"></TextBlock>

                                        <TextBlock FontSize="15" Margin="15 0 0 0" Style="{StaticResource Gotham}"  Text="{Binding EpisodeCountText}" Foreground="White"></TextBlock>
                                        <RepeatButton FontWeight="Normal" Margin="15 -5 0 0" FontSize="12" FontFamily="/Fonts/#Gotham" Loaded="FrameworkElement_OnLoaded" x:Name="ButtonDownloadAllSeasons" PreviewMouseLeftButtonDown="UIElement_OnPreviewMouseLeftButtonDown" Content="{DynamicResource DownloadALlSeasonString}"></RepeatButton>
                                        </StackPanel>
                                        <WrapPanel Margin="0 10 0 0" Grid.Row="2"  Height="170" Width="370" >

                                        <TextBlock FontWeight="Light" Style="{StaticResource Gotham}" x:Name="SeasonDescription" MaxWidth="300" FontSize="14" TextWrapping="Wrap" Foreground="White" Text="{Binding Description}"></TextBlock>
                                           
                                        </WrapPanel>
                                </StackPanel>
                                 


                                </StackPanel>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                        <ListBox.ItemsPanel>
                            <ItemsPanelTemplate>
                                <WrapPanel VirtualizingStackPanel.IsVirtualizing="True"  VirtualizingStackPanel.VirtualizationMode="Recycling" IsItemsHost="True" HorizontalAlignment="Center" Orientation="Horizontal"  />
                            </ItemsPanelTemplate>
                        </ListBox.ItemsPanel>
                    </ListBox>
                </Grid>


            <TextBlock Grid.Row="3" Margin="0 40 0 20" HorizontalAlignment="Center" FontSize="28" Style="{StaticResource Gotham}" Text="{DynamicResource EpisodesString2}" Foreground="White" ></TextBlock>
            <Grid Grid.Row="6" >
                    <ListBox Margin="0 20 0 0"  ScrollViewer.CanContentScroll="True" 
VirtualizingPanel.IsVirtualizing="true" 
VirtualizingPanel.VirtualizationMode="Recycling"   SelectionChanged="EpisodesDisplay_OnSelectionChanged"  ScrollViewer.ScrollChanged="EpisodesDisplay_OnScrollChanged"  ScrollViewer.HorizontalScrollBarVisibility="Disabled" ScrollViewer.VerticalScrollBarVisibility="Disabled" Background="Transparent" x:Name="EpisodesDisplay">

                        <ListBox.ItemContainerStyle>
                            <Style TargetType="ListBoxItem">
                                <Setter Property="IsSelected" Value="{Binding Content.IsSelected, Mode=TwoWay, RelativeSource={RelativeSource Self}}"/>
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="ListBoxItem">
                                            <ContentPresenter/>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </ListBox.ItemContainerStyle>
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                            <StackPanel Orientation="Horizontal" Cursor="Hand"  Margin="0 0 20 0" >

                                <Border BorderBrush="#1F2021" VerticalAlignment="Top" Width="275" Height="160" HorizontalAlignment="Left" RenderTransformOrigin="0.5,0.5" BorderThickness="5">
                                    <Image   Source="{Binding Poster}"></Image>
                                    <Border.RenderTransform>
                                        <ScaleTransform x:Name="ImageScale" ScaleX="1" ScaleY="1" ></ScaleTransform>
                                    </Border.RenderTransform>
                                    <Border.Triggers>
                                        <EventTrigger RoutedEvent="Image.MouseEnter">
                                            <BeginStoryboard>
                                                <Storyboard>
                                                    <DoubleAnimation Storyboard.TargetName="ImageScale" Storyboard.TargetProperty="(ScaleTransform.ScaleX)" To="1.05" Duration="0:0:0.20" />
                                                    <DoubleAnimation Storyboard.TargetName="ImageScale" Storyboard.TargetProperty="(ScaleTransform.ScaleY)" To="1.05" Duration="0:0:0.20" />
                                                </Storyboard>
                                            </BeginStoryboard>
                                        </EventTrigger>
                                        <EventTrigger RoutedEvent="MouseLeave">
                                            <BeginStoryboard>
                                                <Storyboard>
                                                    <DoubleAnimation Storyboard.TargetName="ImageScale" Storyboard.TargetProperty="(ScaleTransform.ScaleX)" To="1" Duration="0:0:0.20" />
                                                    <DoubleAnimation Storyboard.TargetName="ImageScale" Storyboard.TargetProperty="(ScaleTransform.ScaleY)" To="1" Duration="0:0:0.20" />
                                                </Storyboard>
                                            </BeginStoryboard>
                                        </EventTrigger>
                                    </Border.Triggers>
                                </Border>

                                <StackPanel Margin="20 5 0 0" Orientation="Vertical">
                                       <TextBlock Style="{StaticResource Gotham}" FontWeight="Medium" FontSize="18" Text="{Binding EpisodeNumberText}" Foreground="White"></TextBlock>
                                       <StackPanel Orientation="Horizontal" Margin="0 5 0 0">

                                        <TextBlock Style="{StaticResource Gotham}" FontSize="14"  Text="{Binding RatingNumber}" Foreground="White"></TextBlock>



                                        <TextBlock  FontSize="14" Margin="10 0 0 0" Style="{StaticResource Gotham}" Text="{Binding Date}" Foreground="White"></TextBlock>



                                        <TextBlock Margin="10 0 0 0"  FontSize="14" Style="{StaticResource Gotham}" Text="{Binding DurationTime}" Foreground="White"></TextBlock>
                                           
                                    </StackPanel>
                                       <WrapPanel Margin="0 10 0 0" Grid.Row="3"  Height="150" Width="370" >

                                        <TextBlock Style="{StaticResource Gotham}" x:Name="SeasonDescription" MaxWidth="300" FontSize="13" FontWeight="Light" TextWrapping="Wrap" Foreground="White" Text="{Binding Description}"></TextBlock>
                                           
                                       </WrapPanel>
                                </StackPanel>
                                  


                                </StackPanel>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                        <ListBox.ItemsPanel>
                            <ItemsPanelTemplate>
                                <WrapPanel VirtualizingStackPanel.IsVirtualizing="True" HorizontalAlignment="Center"  VirtualizingStackPanel.VirtualizationMode="Recycling" IsItemsHost="True" Orientation="Horizontal"  />
                            </ItemsPanelTemplate>
                        </ListBox.ItemsPanel>
                    </ListBox>
                </Grid>


            </Grid>


    </Grid>
</Page>
