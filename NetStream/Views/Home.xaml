<Page x:Class="NetStream.Home"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:local="clr-namespace:NetStream"
      xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
      xmlns:b="http://schemas.microsoft.com/xaml/behaviors"
      xmlns:fa="http://schemas.awesome.incremented/wpf/xaml/fontawesome.sharp"

      mc:Ignorable="d" 
      Title="Home"          TextElement.Foreground="{DynamicResource MaterialDesignBody}"
      TextElement.FontWeight="Regular"
      TextElement.FontSize="13"
      TextOptions.TextFormattingMode="Ideal"
      TextOptions.TextRenderingMode="Auto"
      FontFamily="{DynamicResource MaterialDesignFont}"
      d:DesignHeight="1500" d:DesignWidth="1584"
      
      Background="#111111" Loaded="Home_OnLoaded" SizeChanged="Home_OnSizeChanged">
    <Page.Resources>
        <local:WidthToFontSizeConverter x:Key="WidthToFontSizeConverter"/>
        <local:MainOverviewWidthConverter x:Key="MainOverviewWidthConverter"/>
        <local:TruncateMainMovieNameTextConverter x:Key="TruncateMainMovieNameTextConverter" MaxLength="90" />
        <local:TruncateMainMovieOverViewTextConverter x:Key="TruncateMainMovieOverViewTextConverter" MaxLength="600" />
        <local:MainMovieNameWidthToPercentageConverter x:Key="MainMovieNameWidthToPercentageConverter" />
    </Page.Resources>
    <Grid>
        <ScrollViewer x:Name="MainScroll" CanContentScroll="True" Grid.Column="0" HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Auto">

            <Grid x:Name="GridSide" VerticalAlignment="Top" Height="1850"   >
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"></RowDefinition>
                    <RowDefinition Height="Auto"></RowDefinition>
                    <RowDefinition Height="Auto"></RowDefinition>
                    <RowDefinition Height="0.2*"></RowDefinition>
                </Grid.RowDefinitions>

                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"></ColumnDefinition>
                </Grid.ColumnDefinitions>

                <Grid Grid.Row="0" Background="Black" x:Name="MainMovieTvShow" Cursor="Hand" PreviewMouseLeftButtonDown="MainMovieTvShow_OnPreviewMouseLeftButtonDown" >
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"></ColumnDefinition>
                        <ColumnDefinition Width="Auto"></ColumnDefinition>
                    </Grid.ColumnDefinitions>
                    <Grid Grid.Row="0"  Grid.Column="1" >
                        <Image Source="{Binding Poster}" 
                               Stretch="UniformToFill" Width="Auto"
                               Height="659" >
                            <Image.Effect>
                                <DropShadowEffect Color="Black" BlurRadius="10" ShadowDepth="0"/>
                            </Image.Effect>
                            <Image.OpacityMask>
                                <LinearGradientBrush StartPoint="1,0" EndPoint="0,0">
                                    <GradientStop Color="Black" Offset="0"/>
                                    <GradientStop Color="Transparent" Offset="1"/>
                                </LinearGradientBrush>
                            </Image.OpacityMask>
                        </Image>
                    </Grid>


                    <StackPanel Opacity="0" 
                                RenderTransformOrigin="0.5, 0.5" x:Name="MainMovieStackPanel" Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="2" Orientation="Vertical" VerticalAlignment="Center">
                        <StackPanel.RenderTransform>
                            <TranslateTransform x:Name="MainMovieStackPanelTransform" Y="50"/>
                        </StackPanel.RenderTransform>
                        <TextBlock  HorizontalAlignment="Left" Margin="50 0 0 0"  FontSize="{Binding ActualWidth, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Page}}, Converter={StaticResource WidthToFontSizeConverter}}" FontWeight="Normal" FontFamily="/Fonts/#Gotham" Text="{Binding Name, Converter={StaticResource TruncateMainMovieNameTextConverter}}"   
                                    TextWrapping="Wrap" 
                                    TextTrimming="CharacterEllipsis"
                                    Width="{Binding ActualWidth, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Page}}, Converter={StaticResource MainMovieNameWidthToPercentageConverter}}"
                                    Foreground="White"   >

                            
                        </TextBlock>
                        <StackPanel Margin="50 15 0 0" Height="25" x:Name="MainMovieDetails"  Orientation="Horizontal">
                            <Viewbox Margin="0 0 10 0" HorizontalAlignment="Left" >
                                <materialDesign:RatingBar 
x:Name="ReadOnlyRatingBar"
IsReadOnly="True"
Value="{Binding Rating}">
                                </materialDesign:RatingBar>
                            </Viewbox>
                            <Viewbox Margin="0 0 10 0" Grid.Column="1">
                                <TextBlock Text="{Binding RatingNumber}" FontWeight="Light" Style="{StaticResource Gotham}" Foreground="#808080"></TextBlock>
                            </Viewbox>
                            <Ellipse Margin="0 0 10 0" Grid.Column="2" Width="5" Height="5"  Fill="#808080"></Ellipse>
                            <Viewbox Margin="0 0 10 0" Grid.Column="3">
                                <TextBlock Text="{Binding ReviewCount}" FontWeight="Light" Style="{StaticResource Gotham}" Foreground="#808080"></TextBlock>
                            </Viewbox>
                            <Ellipse Margin="0 0 10 0" Grid.Column="2" Width="5" Height="5"  Fill="#808080"></Ellipse>
                            <Viewbox Margin="0 0 10 0" >
                                <TextBlock Text="{Binding ReleaseYear}" FontWeight="Light" Style="{StaticResource Gotham}" Foreground="#808080"></TextBlock>
                            </Viewbox>
                            <Ellipse Margin="0 0 10 0" Grid.Column="2" Width="5" Height="5"  Fill="#808080"></Ellipse>
                            <Viewbox Margin="0 0 10 0"  >
                                <TextBlock Text="{Binding Duration}" FontWeight="Light" Style="{StaticResource Gotham}" Foreground="#808080"></TextBlock>
                            </Viewbox>
                        </StackPanel>

                        <TextBlock  Width="{Binding ActualWidth, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Page}}, Converter={StaticResource MainOverviewWidthConverter}}" Margin="50 30 0 0"  HorizontalAlignment="Left" x:Name="OverviewBox" FontSize="16" FontWeight="Light" Style="{StaticResource Gotham}"
                                    TextWrapping="Wrap" 
                                    Foreground="#C7C7C7"
                                    TextTrimming="CharacterEllipsis"
                                    Text="{Binding Overview, Converter={StaticResource TruncateMainMovieOverViewTextConverter}}" >

                        </TextBlock>

                        <!--<StackPanel Margin="50 30 0 0" Orientation="Horizontal">
                            <Button FontSize="16" Foreground="White" PreviewMouseLeftButtonDown="WatchTrailerButton_OnPreviewMouseLeftButtonDown" x:Name="WatchTrailerButton" Style="{StaticResource MaterialDesignFlatButton}" Content="{DynamicResource WatchTrailerString}" FontWeight="Light" FontFamily="/Fonts/#Gotham"></Button>
                            <Button FontSize="16" Foreground="White" x:Name="ButtonWatch" Visibility="Collapsed" PreviewMouseLeftButtonDown="WatchButton_OnPreviewMouseLeftButtonDown" FontWeight="Light" FontFamily="/Fonts/#Gotham" Style="{StaticResource MaterialDesignFlatButton}" Content="Watch"></Button>
                        </StackPanel>-->
                    </StackPanel>


                </Grid>
               

                <Grid Grid.Row="1" Grid.Column="0">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="0.04*"></RowDefinition>
                        <RowDefinition Height="0.08*"></RowDefinition>
                        <RowDefinition Height="0.04*"></RowDefinition>
                        <RowDefinition Height="*"></RowDefinition>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="0.1*"></ColumnDefinition>
                        <ColumnDefinition Width="*"></ColumnDefinition>
                        <ColumnDefinition Width="*"></ColumnDefinition>
                    </Grid.ColumnDefinitions>


                    <TextBlock Margin="0 40 0 20" FontSize="22" HorizontalAlignment="Left" Grid.Column="1" Grid.Row="1" Text="{DynamicResource PopularMoviesString}" Foreground="White" Style="{StaticResource Gotham}" FontWeight="Normal"></TextBlock>
                    <TextBlock  FontSize="16" Margin="0 40 10 0" HorizontalAlignment="Right" Grid.Column="2" Grid.Row="1" Cursor="Hand" PreviewMouseLeftButtonDown="ExploreMoreMoviesHome_OnPreviewMouseLeftButtonDown" x:Name="exploreMoreMoviesHome" MouseEnter="ExploreMoreMoviesHome_OnMouseEnter" MouseLeave="ExploreMoreMoviesHome_OnMouseLeave" Text="{DynamicResource ExploreMoreString}" Foreground="#828282" FontWeight="Light" Style="{StaticResource Gotham}"></TextBlock>
                    <Grid Grid.Column="2" Grid.Row="1">
                           <Grid.RowDefinitions>
                               <RowDefinition Height="0.3*"></RowDefinition>
                               <RowDefinition Height="*"></RowDefinition>
                               <RowDefinition Height="0.3*"></RowDefinition>
                           </Grid.RowDefinitions>

                       

                    </Grid>
                   
                    <ListBox Margin="-10 -10 0 0" ScrollViewer.CanContentScroll="True" MaxHeight="700" 
                      VirtualizingPanel.IsVirtualizing="true" 
                      VirtualizingPanel.VirtualizationMode="Recycling"   Grid.Row="3" Grid.Column="1" Grid.ColumnSpan="2" SelectionChanged="MoviesDisplay_OnSelectionChanged" ScrollViewer.ScrollChanged="MoviesDisplay_OnScrollChanged"  ScrollViewer.HorizontalScrollBarVisibility="Disabled" ScrollViewer.VerticalScrollBarVisibility="Disabled" Background="Transparent" x:Name="MoviesDisplay">
                        <b:Interaction.Behaviors>
                            <local:IgnoreMouseWheelBehavior />
                        </b:Interaction.Behaviors>
                        <ListBox.ItemContainerStyle>
                            <Style TargetType="ListBoxItem">
                                <Setter Property="IsSelected" Value="{Binding Content.IsSelected, Mode=TwoWay, RelativeSource={RelativeSource Self}}"/>
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="ListBoxItem">
                                            <ContentPresenter/>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </ListBox.ItemContainerStyle>
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <StackPanel  Cursor="Hand" Margin="10 10 0 0" Orientation="Vertical">
                                    <Border BorderBrush="#1F2021" VerticalAlignment="Top" Height="375" Width="250" HorizontalAlignment="Left" RenderTransformOrigin="0.5,0.5" BorderThickness="5">
                                        <Image   Source="{Binding Poster}"></Image>
                                        <Border.RenderTransform>
                                            <ScaleTransform x:Name="ImageScale" ScaleX="1" ScaleY="1" ></ScaleTransform>
                                        </Border.RenderTransform>
                                        <Border.Triggers>
                                            <EventTrigger RoutedEvent="Image.MouseEnter">
                                                <BeginStoryboard>
                                                    <Storyboard>
                                                        <DoubleAnimation Storyboard.TargetName="ImageScale" Storyboard.TargetProperty="(ScaleTransform.ScaleX)" To="1.05" Duration="0:0:0.20" />
                                                        <DoubleAnimation Storyboard.TargetName="ImageScale" Storyboard.TargetProperty="(ScaleTransform.ScaleY)" To="1.05" Duration="0:0:0.20" />
                                                    </Storyboard>
                                                </BeginStoryboard>
                                            </EventTrigger>
                                            <EventTrigger RoutedEvent="MouseLeave">
                                                <BeginStoryboard>
                                                    <Storyboard>
                                                        <DoubleAnimation Storyboard.TargetName="ImageScale" Storyboard.TargetProperty="(ScaleTransform.ScaleX)" To="1" Duration="0:0:0.20" />
                                                        <DoubleAnimation Storyboard.TargetName="ImageScale" Storyboard.TargetProperty="(ScaleTransform.ScaleY)" To="1" Duration="0:0:0.20" />
                                                    </Storyboard>
                                                </BeginStoryboard>
                                            </EventTrigger>
                                        </Border.Triggers>
                                    </Border>

                                    <TextBlock VerticalAlignment="Top" Margin="0 20 0 0" FontSize="18" MaxWidth="200" HorizontalAlignment="Left" Grid.Row="1"  TextWrapping="Wrap" Text="{Binding Name}" FontWeight="Light" Style="{StaticResource Gotham}" Foreground="White"></TextBlock>

                                    <StackPanel Margin="-5 1 0 0" Orientation="Horizontal">



                                        <materialDesign:RatingBar  HorizontalAlignment="Left"
                                                                   x:Name="ReadOnlyRatingBar"
                                                                   IsReadOnly="True"
                                                                   Value="{Binding Rating}"></materialDesign:RatingBar>


                                        <TextBlock FontWeight="Light" Style="{StaticResource Gotham}" FontSize="15" Margin="15 3.5 0 0" Grid.Column="1" HorizontalAlignment="Left" Text="{Binding RatingNumber}" Foreground="#767676"></TextBlock>
                                    </StackPanel>
                                </StackPanel>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                        <ListBox.ItemsPanel>
                            <ItemsPanelTemplate>
                                <VirtualizingStackPanel VirtualizingStackPanel.IsVirtualizing="True"  VirtualizingStackPanel.VirtualizationMode="Recycling" IsItemsHost="True" Orientation="Horizontal"  />
                            </ItemsPanelTemplate>
                        </ListBox.ItemsPanel>
                    </ListBox>

                    <RepeatButton PreviewMouseLeftButtonDown="PopularMoviesScrollRightButton_OnPreviewMouseLeftButtonDown" x:Name="PopularMoviesScrollRightButton" Margin="0 0 5 0" BorderBrush="#01000000" Padding="0" Background="#01000000" Grid.Row="3" Grid.Column="2" Width="40" Height="375" VerticalAlignment="Top"   HorizontalAlignment="Right">
                        <materialDesign:PackIcon Width="40" Opacity="1" Height="40" Foreground="White"
    
                            Kind="ChevronRight"
                        />
                    </RepeatButton>
                    <RepeatButton Margin="-40 0 0 0" PreviewMouseLeftButtonDown="PopularMoviesScrollLeftButton_OnPreviewMouseLeftButtonDown" x:Name="PopularMoviesScrollLeftButton"  Padding="0" BorderBrush="#01000000" Background="#01000000" Grid.Row="3" Grid.Column="1" Width="40" Height="375" HorizontalAlignment="Left" VerticalAlignment="Top">
                        <materialDesign:PackIcon Opacity="0.4" Width="40" Height="40" Foreground="White"
    
                                                 Kind="ChevronLeft"
                        />
                    </RepeatButton>

                </Grid>

                <Grid Grid.Row="2" Grid.Column="0">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="0.04*"></RowDefinition>
                        <RowDefinition Height="0.08*"></RowDefinition>
                        <RowDefinition Height="0.04*"></RowDefinition>
                        <RowDefinition Height="*"></RowDefinition>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="0.1*"></ColumnDefinition>
                        <ColumnDefinition Width="*"></ColumnDefinition>
                        <ColumnDefinition Width="*"></ColumnDefinition>
                    </Grid.ColumnDefinitions>

                    <TextBlock FontSize="22" Margin="0 40 0 20" HorizontalAlignment="Left" Grid.Column="1" Grid.Row="1" Text="{DynamicResource PopularTvShowsString}" Style="{StaticResource Gotham}" FontWeight="Normal" Foreground="White" ></TextBlock>

                    <TextBlock FontSize="16" Margin="0 40 10 0" HorizontalAlignment="Right" Grid.Column="2" Grid.Row="1" PreviewMouseLeftButtonDown="ExploreMoreTvShowsHome_OnPreviewMouseLeftButtonDown" Cursor="Hand" x:Name="exploreMoreTvShowsHome" MouseEnter="ExploreMoreTvShowsHome_OnMouseEnter" MouseLeave="ExploreMoreTvShowsHome_OnMouseLeave" Text="{DynamicResource ExploreMoreString}" Foreground="#828282" FontWeight="Light" Style="{StaticResource Gotham}"></TextBlock>


                    <ListBox Margin="-10 -10 0 0"  ScrollViewer.CanContentScroll="True" MaxHeight="500" 
                             VirtualizingPanel.IsVirtualizing="true" 
                             VirtualizingPanel.VirtualizationMode="Recycling"   Grid.Row="3" Grid.Column="1" Grid.ColumnSpan="2" SelectionChanged="TvShowDisplay_OnSelectionChanged"  ScrollViewer.ScrollChanged="TvShowDisplay_OnScrollChanged"  ScrollViewer.HorizontalScrollBarVisibility="Disabled" ScrollViewer.VerticalScrollBarVisibility="Disabled" Background="Transparent" x:Name="TvShowDisplay">
                        <b:Interaction.Behaviors>
                            <local:IgnoreMouseWheelBehavior />
                        </b:Interaction.Behaviors>
                        <ListBox.ItemContainerStyle>
                            <Style TargetType="ListBoxItem">
                                <Setter Property="IsSelected" Value="{Binding Content.IsSelected, Mode=TwoWay, RelativeSource={RelativeSource Self}}"/>
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="ListBoxItem">
                                            <ContentPresenter/>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </ListBox.ItemContainerStyle>
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <StackPanel  Cursor="Hand" Margin="10 10 0 0" Orientation="Vertical">
                                    <Border BorderBrush="#1F2021" VerticalAlignment="Top" Height="375" Width="250" HorizontalAlignment="Left" RenderTransformOrigin="0.5,0.5" BorderThickness="5">
                                        <Image   Source="{Binding Poster}"></Image>
                                        <Border.RenderTransform>
                                            <ScaleTransform x:Name="ImageScale" ScaleX="1" ScaleY="1" ></ScaleTransform>
                                        </Border.RenderTransform>
                                        <Border.Triggers>
                                            <EventTrigger RoutedEvent="Image.MouseEnter">
                                                <BeginStoryboard>
                                                    <Storyboard>
                                                        <DoubleAnimation Storyboard.TargetName="ImageScale" Storyboard.TargetProperty="(ScaleTransform.ScaleX)" To="1.05" Duration="0:0:0.20" />
                                                        <DoubleAnimation Storyboard.TargetName="ImageScale" Storyboard.TargetProperty="(ScaleTransform.ScaleY)" To="1.05" Duration="0:0:0.20" />
                                                    </Storyboard>
                                                </BeginStoryboard>
                                            </EventTrigger>
                                            <EventTrigger RoutedEvent="MouseLeave">
                                                <BeginStoryboard>
                                                    <Storyboard>
                                                        <DoubleAnimation Storyboard.TargetName="ImageScale" Storyboard.TargetProperty="(ScaleTransform.ScaleX)" To="1" Duration="0:0:0.20" />
                                                        <DoubleAnimation Storyboard.TargetName="ImageScale" Storyboard.TargetProperty="(ScaleTransform.ScaleY)" To="1" Duration="0:0:0.20" />
                                                    </Storyboard>
                                                </BeginStoryboard>
                                            </EventTrigger>
                                        </Border.Triggers>
                                    </Border>

                                    <TextBlock VerticalAlignment="Top" Margin="0 20 0 0" FontSize="18" MaxWidth="200" HorizontalAlignment="Left" Grid.Row="1"  TextWrapping="Wrap" Text="{Binding Name}" FontWeight="Light" Style="{StaticResource Gotham}" Foreground="White"></TextBlock>

                                    <StackPanel Margin="-5 1 0 0" Orientation="Horizontal">



                                        <materialDesign:RatingBar  HorizontalAlignment="Left"
                                                                   x:Name="ReadOnlyRatingBar"
                                                                   IsReadOnly="True"
                                                                   Value="{Binding Rating}"></materialDesign:RatingBar>


                                        <TextBlock FontSize="15" Margin="15 3.5 0 0" Grid.Column="1" HorizontalAlignment="Left" Text="{Binding RatingNumber}" FontWeight="Light" Style="{StaticResource Gotham}" Foreground="#767676"></TextBlock>
                                    </StackPanel>
                                </StackPanel>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                        <ListBox.ItemsPanel>
                            <ItemsPanelTemplate>
                                <VirtualizingStackPanel VirtualizingStackPanel.IsVirtualizing="True"  VirtualizingStackPanel.VirtualizationMode="Recycling" IsItemsHost="True" Orientation="Horizontal"  />
                            </ItemsPanelTemplate>
                        </ListBox.ItemsPanel>
                    </ListBox>

                    <RepeatButton PreviewMouseLeftButtonDown="PopularTvScrollRightButton_OnPreviewMouseLeftButtonDown"  x:Name="PopularTvScrollRightButton" Margin="0 0 5 0" BorderBrush="#01000000" Padding="0" Background="#01000000" Grid.Row="3" Grid.Column="2" Width="40" Height="375" VerticalAlignment="Top"   HorizontalAlignment="Right">
                        <materialDesign:PackIcon Width="40" Opacity="1" Height="40" Foreground="White"
    
                                                 Kind="ChevronRight"
                        />
                    </RepeatButton>
                    <RepeatButton Margin="-40 0 0 0" PreviewMouseLeftButtonDown="PopularTvScrollLeftButton_OnPreviewMouseLeftButtonDown"  x:Name="PopularTvScrollLeftButton"  Padding="0" BorderBrush="#01000000" Background="#01000000" Grid.Row="3" Grid.Column="1" Width="40" Height="375" HorizontalAlignment="Left" VerticalAlignment="Top">
                        <materialDesign:PackIcon Opacity="0.4" Width="40" Height="40" Foreground="White"
    
                                                 Kind="ChevronLeft"
                        />
                    </RepeatButton>
                </Grid>


            </Grid>

        </ScrollViewer>
    </Grid>
</Page>
